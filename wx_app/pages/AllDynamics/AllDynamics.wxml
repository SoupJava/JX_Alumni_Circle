<!--pages/AllDynamics/AllDynamics.wxml-->
<view class="page">
  <view class="top" style="background-color: {{userinfo.theme.color}};">
    <view class="welcome">
      <view class='eye{{userinfo.theme.emoji}}'>
        <view class="left" style="background-color: {{userinfo.theme.color}};animation-name: myeye{{userinfo.theme.emoji}};">
          <view class="leftl"></view>
        </view>
        <view class="right" style="background-color: {{userinfo.theme.color}};animation-name: myeye{{userinfo.theme.emoji}};">
          <view class="rightl"></view>
        </view>
      </view>
    </view>
  </view>
  <view class="control">
    <view class="controlitem">
      <view class="item" bind:tap="ChangeComment">
        <view>
          <van-icon name="smile-comment-o" size="60rpx" color="{{active=='0'?userinfo.theme.color:'black'}}" />
        </view>
        <view style="color:{{active=='0'?userinfo.theme.color:'black'}}">
          校园动态
        </view>
      </view>
      <view class="item" bind:tap="ChangeHelp">
        <view>
          <van-icon name="question-o" size="60rpx" color="{{active=='1'?userinfo.theme.color:'black'}}" />
        </view>
        <view style="color:{{active=='1'?userinfo.theme.color:'black'}}">
          问答求助
        </view>
      </view>
      <view class="item" bind:tap="ChangeSale">
        <view>
          <van-icon name="balance-o" size="60rpx" color="{{active=='2'?userinfo.theme.color:'black'}}" />
        </view>
        <view style="color:{{active=='2'?userinfo.theme.color:'black'}}">
          二手出售
        </view>
      </view>
      <view class="item" bind:tap="ChangeReturn">
        <view>
          <van-icon name="revoke" size="60rpx" color="{{active=='3'?userinfo.theme.color:'black'}}" />
        </view>
        <view style="color:{{active=='3'?userinfo.theme.color:'black'}}">
          失物招领
        </view>
      </view>
    </view>
  </view>
  <van-divider />
  <view class="message">
    <block wx:if="{{active=='0'}}">
      <view wx:for="{{SchoolComment}}" wx:key="index" wx:for-index="i">
        <view class="moments">
          <view class="userid" bind:tap="LookUser" data-id="{{item.openid}}">
            <van-image round width="3rem" height="3rem" fit="cover" src="{{item.userInfo.userImage}}" />
            <view style="margin-left:5px;">
              <view>
                <text class="container-id">{{item.userInfo.userName}}</text>
              </view>
              <view>
                <block wx:if="{{item.userInfo.userSex==0}}">
                  <text style="color:rgb(28, 28, 230)"> ♂ </text>
                </block>
                <block wx:else>
                  <text style="color:rgb(196, 53, 43)"> ♀ </text>
                </block>
                <text class="sj">{{item.sendTime}}</text>
              </view>
            </view>
          </view>
          <view class="documents" bind:tap="LookComment" data-id="{{item._id}}">
            <view class="fonttext">
              <text>
                {{item.CommentMessage}}
              </text>
            </view>
            <!-- 图片 -->
            <view class='photo-view'>
              <view class='photo' wx:for='{{item.CommentImage}}' wx:for-item="item2" wx:key="idx" style='width:{{photoWidth}}px;height:{{photoWidth}}px'>
                <image src='{{item2}}' style='width:{{photoWidth}}px;height:{{photoWidth}}px'></image>
              </view>
            </view>
            <!-- 点赞评论操作 -->
            <view class="dzpl">
              <view>
                <van-icon name="like-o" />
                <block>{{item.LoveNum}}</block>
              </view>
              <view style="margin-left:30rpx;">
                <van-icon name="comment-o" />
                <block>{{item.ChatNum}}</block>
              </view>
            </view>
            <!-- 评论 -->
            <view class='discuss-view'>
              <view class='discuss' wx:for='{{item.ChatMessage}}' wx:for-item="citem" wx:key="index">
                <label bindtap='TouchZanUser' data-name='{{citem.SenderName}}' class='discuss-user'>'{{citem.SenderName}}'对</label>
                <label bindtap='TouchZanUser' data-name='{{citem.ReceiverName}}' class='discuss-user'>'{{citem.ReceiverName}}'说：</label>
                <label>{{citem.ChatMessage}}</label>
              </view>
            </view>
          </view>
        </view>
        <van-divider />
      </view>
      <block wx:if="{{nomore[0]}}">
        <van-divider contentPosition="center" customStyle="color:{{userinfo.theme.color}}; border-color: {{userinfo.theme.color}}; font-size: 30rpx;">
          <van-icon name="sign" /> 我也是有底线滴
        </van-divider>
      </block>
    </block>
    <block wx:if="{{active=='1'}}">
      <view wx:for="{{HelpDiscuss}}" wx:key="index">
        <view class="container1">
          <view class="userid" bind:tap="LookUser" data-id="{{item.openid}}">
            <van-image round width="3rem" height="3rem" fit="cover" src="{{item.userInfo.userImage}}" />
            <view style="margin-left:5px;">
              <view>
                <text class="container-id">{{item.userInfo.userName}}</text>
              </view>
              <view>
                <block wx:if="{{item.userInfo.userSex==0}}">
                  <text style="color:rgb(28, 28, 230)"> ♂ </text>
                </block>
                <block wx:else>
                  <text style="color:rgb(196, 53, 43)"> ♀ </text>
                </block>
                <text class="sj">{{item.sendTime}}</text>
              </view>
            </view>
          </view>
          <view bind:tap="LookHelp" data-id="{{item._id}}" style="margin-top: 5px;margin-left: 5px; display: block;text-overflow:ellipsis; word-wrap:break-word;">
            <text style="font-weight: bolder;">问: </text>
            <text>{{item.DiscussMessage}}</text>
          </view>
          <view class="detail">
            <van-icon name="eye-o" />
            <text style="font-size: small;margin-right: 20px;">{{item.LookNum}}</text>
            <van-icon name="other-pay" />
            <text style="font-size: small;">{{item.AnswerNum}}</text>
          </view>
        </view>
      </view>
      <block wx:if="{{nomore[1]}}">
        <van-divider contentPosition="center" customStyle="color:{{userinfo.theme.color}}; border-color: {{userinfo.theme.color}}; font-size: 30rpx;">
          <van-icon name="sign" /> 我也是有底线滴
        </van-divider>
      </block>
    </block>
    <block wx:if="{{active=='2'}}">
      <view wx:for="{{shSale}}" wx:key="index">
        <view bind:tap="LookSale" data-id="{{item._id}}" class="goodlist" style="width:{{(goodWidth-40)/2}}px;" data-openid="{{item.openId}}">
          <view>
            <van-image width="{{(goodWidth-40)/2}}px" height="{{(goodWidth-40)/2}}px" fit="cover" src="{{item.GoodsImage[0]}}" />
          </view>
          <view class="goodtext">
            {{item.SaleMessage}}
          </view>
        </view>
      </view>
      <block wx:if="{{nomore[2]}}">
        <van-divider contentPosition="center" customStyle="color:{{userinfo.theme.color}}; border-color: {{userinfo.theme.color}}; font-size: 30rpx;">
          <van-icon name="sign" /> 我也是有底线滴
        </van-divider>
      </block>
    </block>
    <block wx:if="{{active=='3'}}">
      <view wx:for="{{LossReturn}}" wx:key="index" wx:for-index="i">
        <view class="moments">
          <view class="userid" bind:tap="LookUser" data-id="{{item.openid}}">
            <van-image round width="3rem" height="3rem" fit="cover" src="{{item.userInfo.userImage}}" />
            <view style="margin-left:5px;">
              <view>
                <text class="container-id">{{item.userInfo.userName}}</text>
              </view>
              <view>
                <block wx:if="{{item.userInfo.userSex==0}}">
                  <text style="color:rgb(28, 28, 230)"> ♂ </text>
                </block>
                <block wx:else>
                  <text style="color:rgb(196, 53, 43)"> ♀ </text>
                </block>
                <text class="sj">{{item.sendTime}}</text>
                <block wx:if="{{item.LorR==0}}">
                  <text style="color:rgb(139, 137, 6)"> 失者 </text>
                </block>
                <block wx:else>
                  <text style="color:rgb(139, 6, 121)"> 拾者 </text>
                </block>
              </view>
            </view>
          </view>
          <view bind:tap="LookReturn" data-id="{{item._id}}" class="documents">
            <view class="fonttext">
              <view>
                时间：<text>{{item.recordTime}}</text>
              </view>
              <view>
                地点：<text>{{item.recordPlace}}</text>
              </view>
              <view>
                联系方式：<text>{{item.recordContact}}</text>
              </view>
              <view>
                备注：<text>{{item.recordOther}}</text>
              </view>
            </view>
            <!-- 图片 -->
            <view class='photo-view'>
              <view class='photo' wx:for='{{item.GoodsImage}}' wx:key="ind" wx:for-item="item2" style='width:{{photoWidth}}px;height:{{photoWidth}}px'>
                <image bindtap='LookPhoto' data-who="3" data-ind="{{i}}" data-photUrl='{{item2}}' src='{{item2}}' style='width:{{photoWidth}}px;height:{{photoWidth}}px'></image>
              </view>
            </view>
          </view>
        </view>
        <van-divider />
      </view>
      <block wx:if="{{nomore[3]}}">
        <van-divider contentPosition="center" customStyle="color:{{userinfo.theme.color}}; border-color: {{userinfo.theme.color}}; font-size: 30rpx;">
          <van-icon name="sign" /> 我也是有底线滴
        </van-divider>
      </block>
    </block>
  </view>
</view>
<van-notify id="van-notify" />